
- Yii2
	- [计划](plan.md)
	-  干货
		- [符合P
		- SR-1/PSR-2的PHP编程规范实例](../php/standard.php)
		- [yii2干货集](college/awesome-yii2.md) 
	- 常用
		- user
			- Yii::$app->user->getId()  //获取用户Id
			- Yii::$app->user->getCompanyId()  //获取当前登录的公司id
			- Yii::$app->user->getIdentity()->companyInfo->id  //api获取公司id获取
			- Yii::$app->user->identity->username //获取用户表 user.realname
			- Yii::$app->shopUser->id //获取H5店铺用户id
		- 关闭csrf
			- public $enableCsrfValidation = false;	控制器全局
			- $this->enableCsrfValidation = false;  指定方法里设置
		-  [手动增加csrf](op.md#手动增加csrf) 
		-  执行sql
			- $res = Yii::$app->db->createCommand($sql)->execute(); 更新/删除
			- $res = Yii::$app->db->createCommand($sql)->queryOne(); 存储过程/函数
			- $res = Yii::$app->db->createCommand($sql)->queryAll();  
		-  YII_ENV_PROD 判断是否生成环境
		-  layout
			-  [根据参数选择不同layout,如充值有个人和企业统一入口,不同身份不同layout](op.md#根据参数选择不同layout,如充值有个人和企业统一入口,不同身份不同layout) 
			- [controller传值给layout](op.md#controller传值给layout) 
		- 发布线上
			- [缓存清空](op.md#缓存清空)  ./yii cache/flush-all  //根目录运行,清空所有
				- 清空表结构缓存的方法  
				- 清空所有的缓存--不仅仅是mysql表结构
				- 使用 yii命令行的方式commond清除缓
			- 初始化目录权限
				- ./console/yii app/set-writable
		-  [打印sql](op.md#打印sql)  //$commandQuery->createCommand()->getRawSql()
		-  $this->route		//获取当前路由字符串
		-  $this->action	//获取当前action对象
		-  \Yii::$app->controller->id	//获取当前控制器ID
		-  $this->module->id	//获取当前模块ID
		-  获取最后插入的id.
			-  \Yii::$app->getDb()->lastInsertId;
			-  model->attributes['id']
			-  $model->getOldAttribute("id")
		- yii\helpers\BaseHtml::encode($str)    //字符串进行转义
	- composer
		- 如yii2的更新,手动删除vendor下目录yiisoft,再执行 composer install by_zhou 
	
	- function	功能模块
		-  [ArrayHelper](function.md#ArrayHelper) 
		-  上传 upload
			-  [API通用上传接口_每次仅上传一个_lm](function/upload_lm.md#API通用上传接口_每次仅上传一个_lm) 
		- db
			- [配置多个数据库_lh](function.md#配置多个数据库_lh) 
		- 组件
			- [自定义组件](function/component.md#自定义组件)  [TERRY]
		- module 
			- [modules生成与使用](function/module.md#modules生成与使用)
			- [模块module包含组件使用](function/module.md#模块module包含组件使用) [TERRY]
			- [短信sms配置代码采集](function/module.md#短信sms配置代码采集)
				- 搭建
					- 创建company Module [复制于Frontend]
						- [http.conf配置](function/module.md#http.conf配置)
					- 创建子域名 如i.ysk.dev
						- [将Frontend复制一份改名为company,修改相关的配置](function/module.md#将Frontend复制一份改名为company,修改相关的配置)
						- [http.conf配置](function/module.md#http.conf配置)
						- 127.0.0.1 i.ysk.dev //hosts
		- console	
			-  基本使用
				- php /var/www/console/yii app/set-writable  //初始化目录权限
				- php /var/www/网站根目录/yii car/driver-trip-tips //执行根目录console/controllers/CarController.php下的方法actionDriverTripTips()
		- 缓存
			- cache [控制器层] @withy
				- 常用操作 [代码](function/cache_file/DemoCacheController.php)
					- [组件配置](function/cache_file.md#组件配置) yii\caching\FileCache
					- [基本的保存与写入](function/cache_file.md#基本的保存与写入)
					- [清空缓存](function/cache_file.md#清空缓存)
				- 依赖操作
					- [文件](function/cache_file.md#文件)
					- [表达式](function/cache_file.md#表达式)
					- [DB](function/cache_file.md#DB)
			- 页面缓存 [view层]
				- beginCache 
					- [缓存时间](function/cache_file.md#缓存时间)
					- [文件依赖](function/cache_file.md#文件依赖)
					- [缓存开关](function/cache_file.md#缓存开关)
				- [嵌套缓存](function/cache_file.md#嵌套缓存)
			- 页面缓存 [controller层]
				- [使用behavior进行全局缓存](function/cache_file.md#使用behavior进行全局缓存)
				- [http缓存](function/cache_file.md#http缓存)
			- 调试
				- [beginProfile](function/debug.md#beginProfile)  代码区间性能检测
	- session
		- 保存与获取
			- 方法1
				-  Yii::$app->getSession()->set('mobile', $user->mobile);
				-  Yii::$app->getSession()->get('mobile');
			-  方法2
				-  Yii::$app->session->set('rtn_url', $_rtn_url);
				-  Yii::$app->session->get('rtn_url');
	- cookie
		- 保存与获取
			- [user登陆信息保存](function/cookie.md#登陆信息保存)
	- 异常类
		- 常用
			- yii\web\BadRequestHttpException
			- yii\web\ForbiddenHttpException
			- yii\web\NotFoundHttpException
			- yii\web\ServerErrorHttpException
			- yii\web\UnauthorizedHttpException
			- yii\web\TooManyRequestsHttpException
	- 日志
		- 存储 
			- Yii::getLogger()->log($message, $level, $category = 'application')
			- Yii::trace($message, $category = 'application');
			- Yii::error($message, $category = 'application');
			- Yii::warning($message, $category = 'application');
			- Yii::info($message, $category = 'application');
				- 如 Yii::info($log,__METHOD__);
	- 事件
		- [事件-简单例子](event.md#简单例子) @白狼栈
		- [事件-邮件发送](event/event_mail.md) trigger on  @白狼栈
		- [猫叫老鼠跑的事件](event/cat_mouse_dog_event.md#猫叫老鼠跑的事件) @withy
			- 猫添加触发器
			- 控制器绑定
		- 自带事件	@foreach
			- model层 
				- [保存之前的事件示例](event.md#保存之前的事件示例)	[beforeSave]
				- [保存之后的事件示例](event.md#保存之后的事件示例)	[afterSave]
				- [删除之后的事件示例](event.md#删除之后的事件示例)	[afterDelete]
				- [事件怎么保证数据事务呢？](event.md#事件怎么保证数据事务呢)	[transactions]
			- controller层
				- [每次请求之前操作示例](event.md#每次请求之前操作示例)		[beforeAction]
				- [每次请求之后操作示例](event.md#每次请求之后操作示例)		[afterAction]
		- [触发saving事件_同时保存日志和缓存](event.md#触发saving事件_同时保存日志和缓存)	 [使用观察者模式] @ilvsx
	- 行为
		- 猫叫老鼠添加行为  @withy
			- 类的混合 在类里绑定行为
				- [给狗添加行为方法和行为变量](behavior.md#给狗添加行为方法和行为变量)
				- [给狗添加事件与触发](behavior.md#给狗添加事件与触发)
			- 对象的混合  在控制器里 绑架attachBehavior 解绑detachBehaviors 
				- [定义行为类](behavior.md#定义行为类)
				- [控制器绑定或解绑行为](behavior.md#控制器绑定或解绑行为) 
	- 依赖注入
		- @withy    
			- [容器](DiController.md) 定义并解决依赖关系  new Container()   set  get 
			- [服务器定位](servicelocal.md) 配置服务的参数信息
				- [控制器配置调用](servicelocal.md#控制器配置调用)
				- [参数配置在文件并调用](servicelocal.md#参数配置在文件并调用)
	- widget
		- [widget简单例子](widget.md#widget简单例子)
			- [1创建一个TestWidget](widget.md#1创建一个TestWidget)
			- [2view页调用](widget.md#2view页调用)
		- widget仿WeUI上传插件 (自定义图片上传插件)
			- [Widgt主文件](widget.md#widgt主文件)
			- [Asset配置](widget.md#asset配置)
			- [视图调用](widget.md#视图调用)
		- [widget和behavior一起使用](widget.md#widget和behavior一起使用)
			- [widget代码](widget.md#widget代码)
			- [behavior代码](widget.md#behavior代码)
			- [视图使用](widget.md#视图使用)
	- AssetBundle
		- [AssetBundle简单使用](AssetBundle.md#AssetBundle简单使用)
			- [自定义css和js](AssetBundle.md#自定义css和js)
			- [js解决依赖关系](AssetBundle.md#js解决依赖关系)
			- [view层使用](AssetBundle.md#view层使用)
	- view
		- [时间-input输入框选择](view.md#输入框选择日期)
		- [radio自定义模板](radio自定义模板.md)
		- [时间字段年月日显示](view.md#时间字段年月日显示)
		- [时间区间范围的选择](view.md#时间区间范围的选择)
		- [lookup](lookup.md)
			- 配置
			- 使用
				- 1.数据入库
				- 2.view使用
		- [自定义列表页_按纽模板](view.md#自定义列表页_按纽模板) (如某个删除与编辑按纽不要，可加别的)
			- [自定义列表页_按纽模板_增加判断](view.md#自定义列表页_按纽模板_增加判断)
			- [自定义列表页_按纽模板_增加判断_小明](view.md#自定义列表页_按纽模板_增加判断_小明)
		- URL地址生成
			- [url::to](view.md#url_to)
			- [Html::a](view.md#html_a)
		- [列表页_自定义编号_删除](view.md#列表页_自定义编号_删除)
    - controller
	    - 接收数据与验证 (注:post提交)
		    - [接收post再验证_标准例子](post.md#接收post再验证_标准例子)（包括事务）
		    - [接收post再验证_例a](post.md#接收post再验证_例a) ($model->save())
		    - [接收post再验证_例b](post.md#接收post再验证_例b)  ($model->save(false))
		    - [没有记录插入_否则就更新](post.md#没有记录插入_否则就更新)  -  isGet isPost  insert update  [jason]
		    -  [没有记录插入_否则就更新_例2](post.md#没有记录插入_否则就更新_例2)
		- yii2自带函数连接
			- [leftJoin](post.md#leftjoin)
			- [leftjoin_详细页](post.md#leftjoin_详细页)
			- [leftjoin_分页_wqw](post.md#leftjoin_分页_wqw)
			- [leftjoin_分页_接口_视图_搜索](post.md#leftJoin_分页_接口_视图_搜索)
		- 查询连环招
			- [利用模型get表关联查询_wqw](post.md#利用模型get表关联查询_wqw)
		- actions全局定义
			- [指定控制器嵌入全局性方法action](post.md#指定控制器嵌入全局性方法action) (即全局性方法可以前后台使用,如短信)
				- [指定控制器设置action配置](post.md#指定控制器设置action配置)
				- [全局方法定义开发](post.md#全局方法定义开发)
		- 批量插入
			- [原始的方法foreach](post.md#原始的方法foreach)
			- [batchInsert](post.md#batchInsert) batchInsert
		- 更新 updateAll
			- [updateAll](post.md#updateAll) 
			- [updateAllCounters](post.md#updateAllCounters)  计数器专用
		- 删除 deleteAll  between
			- [字符串格式删除](post.md#字符串格式删除)  
			-  [数组加入范围](post.md#数组加入范围)  
		- 插入
			- 统计店铺访问量
		- [存储过程使用](post.md#存储过程使用) 
    - model_AR
	    - [managesearch方法_个性化+自定义配置](model.md#managesearch方法_个性化+自定义配置)
		    - [使用子查询使用](model.md#使用子查询使用)
			- [列表页使用](model.md#列表页使用)
			- search关联用户表取username
				- [1.配置UserActivity模型](model.md#1配置useractivity模型)
				- [2.配置UserActivitySearch模型](model.md#2配置useractivity_search模型)
				- [3.列表页显示](model.md#3列表页显示)
			- search关联用户表取mobile以别名形式
				- [a.配置UserActivity模型](model.md#a配置useractivity模型)
				- [b.配置UserActivitySearch模型](model.md#b配置useractivity_search模型)
				- [c.列表页显示](model.md#c列表页显示)
			- 条件过滤_where
				- [where_普通使用](model.md#where_普通使用) (andwhere)
				- [where_大于小于](model.md#where_大于小于) (andFilterWhere)
				- [where_in](model.md#where_in) 
				- [where_or](model.md#where_or) and
				- [where_like查询](model.md#where_like) (andFilterWhere)
			- Expression()  查询不过滤
				- [sql语句不过滤](model.md#sql语句不过滤)
		- [自定义场景](model.md#自定义场景)
			 - [model定义](model.md#model定义)
			 - [controller使用](model.md#controller使用)
		- [指定字段的自定义函数过滤](model.md#指定字段的自定义函数过滤)
			- 场景
			- 登陆获取公司ID_复杂的例子_zhou  
		- rules定义
			- [自定义过滤函数filter](model.md#自定义过滤函数filter)
		- setIsNewRecord()使用
			- [创建账户，如果不存在才创建.存在则直接返回账户id_wqw](model.md#创建账户，如果不存在才创建.存在则直接返回账户id_wqw)
		- link() 等于 更新[update] 应该是双向更新
			- [获取Customer的主键,然后order表同时存储该Customer主键](model.md#获取Customer的主键,然后order表同时存储该Customer主键)
			- [双向更新_link](model.md#双向更新_link)
	- model_form
		- [登陆_SignupForm](model_form.md#登陆_SignupForm)
		- 
	- 权限 authManager assign
		- [基本使用](authManager.md#基本使用)
		- 使用权限
			- [vding使用权限](authManager.md#vding使用权限) [tianle]
	- 配置
		- [路由设置-伪静态](content.md#路由设置-伪静态) 
	- 扩展
		- [自定义扩展](extensions.md#自定义扩展)   猫与老鼠事件
		- [将别人扩展放入自己的仓库_然后从自己的仓库调用](extensions.md#将别人扩展放入自己的仓库_然后从自己的仓库调用)
	- Restful Api
		- 使用自带与个性化
			- [使用自带与个性化_DEMO版本](restful_api.md#使用自带与个性化_DEMO版本) 
			- [使用自带与个性化_syg](restful_api.md#使用自带与个性化_syg) 
		- controller
			- [方法使用_事务_trycatch_badrequesthttpexception_servererrorhttpexception](restful_api.md#方法使用_事务_trycatch_badrequesthttpexception_servererrorhttpexception) 
			- [api分页效果](restful_api.md#api分页效果) 

- 疑问
	- [为什么日志不入数据库](question.md#为什么日志不入数据库)
- 案例 
	- vding_api
		- 操作
			- [重置密码](vding_api.md#重置密码) 
			- [获取token](vding_api.md#获取token) 
			- [服务模块仅企业帐号可登陆](vding_api.md#服务模块仅企业帐号可登陆) 
		- [api认证_zhou](vding_api.md#api认证_zhou)
			- 控制器基类定义
			- 认证类
			- access-token模拟生成
			- 完整访问地址
		- 第三方
			- [模拟登陆](vding_api.md#模拟登陆)
		- API创建过程
			- [创建控制器继续基类](vding_api.md#创建控制器继续基类)
			- [rule设置](vding_api.md#rule设置)
	- [店铺](shop/README.md)
		- 核心技术
			- [1后端跨域解决方案](shop.md#1后端跨域解决方案)  
			- [2怎样在请求头加上Companyid和Ownerid两个参数](shop.md#2怎样在请求头加上Companyid和Ownerid两个参数)   
			- [3在请求时候_后端怎样获取Header里的两个参数](shop.md#3在请求时候_后端怎样获取Header里的两个参数)
			- [3_1php获取header的函数解析](shop.md#3_1php获取header的函数解析)
			- [使用postman模拟参数php解析获取](shop.md#使用postman模拟参数php解析获取)
	- 待分析 
		- [loginForm_注册_afterSignup](daiFenXi/loginForm.md)  wqw   
			-  $this->refresh();
			-  $this->link('account', $account);	
	- 短信模块分析
		- sms短信_z
			- 操作使用
				- [sms短信_配置](function/sms_z.md#sms短信_配置)
				- [sms短信_使用](function/sms_z.md#sms短信_使用)
					- 1.使用 new Sms() 【建议使用这种】
					- 2.使用 Yii::$app->sms
				-  定义全局sms_actions挂裁
					- [公司SignInController_z](function/sms_z.md#公司SignInController_z)
					- [店铺LoginController_w](function/sms_z.md#店铺LoginController_w)
		    - 代码分析
			    - [解析“云通讯接口“文档要求与代码开发](function/sms_z.md#解析“云通讯接口“文档要求与代码开发)
				    - [GuzzleHttp\Client](function/sms_z.md#GuzzleHttp\Client) [模拟登陆] 代替curl
	- 权限分析 [yii2_admin]
	- App接口全局配置
	- 用户登陆 [yii start kit]
		- user组件定义
			- [company模块里包含"企业用户"与小模块里的"H5店铺"两个用户](user.md#company模块里包含"企业用户"与小模块里的"H5店铺"两个用户)  
			- [ResultApi用户](user.md#ResultApi用户)  
		- 分析
			- Yii::$app->user->identity->username  //怎样获取user.username
		- 案例
			- H5店铺登陆_w
				- [环境说明](h5_login_w.md#环境说明)
				- [密码登陆](h5_login_w.md#密码登陆)
				- [短信登陆](h5_login_w.md#短信登陆)
			- 企业登陆_z
				- [配置文件](company_login_z.md#配置文件)
				- [SignInController_控制器](company_login_z.md#SignInController_控制器) 
				- [LoginForm](company_login_z.md#LoginForm) //Form类
				- [CompanyUser](company_login_z.md#CompanyUser)  //Yii::$app->user 所指的类
				- [User](company_login_z.md#User) //user认证类
				- [时序图](company_login_z.md#时序图)
			- 仿照一个Module下两个登陆模块
				- 
	- 农行
		- [socket请求文档](nongye/socket.php) tcp/ip请求





